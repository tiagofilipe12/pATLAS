<html>
<head>

  <meta charset="UTF-8"/>
  <link rel="icon" type="image/png"
        href="{{ url_for('static', filename='images/pATLAS.png') }}"
        size="32x32">
  <title>Plasmid Atlas</title>
  <!--Import dependencies using yarn + webpack-->
  <script language="javascript" type="text/javascript" src="{{ url_for('static', filename='bundle.min.js') }}"></script>
  <!-- Place this tag in your head or just before your close body tag. -->
  <script async defer src="https://buttons.github.io/buttons.js"></script>
  <!-- custom js scripts -->
  <script language="javascript" type="text/javascript" src="{{ url_for('static', filename='js/visualization_functions.js') }}"></script>
  <script language="javascript" type="text/javascript" src="{{ url_for('static', filename='js/input_file_handling/alternative_loading.js') }}"></script>
  <script language="javascript" type="text/javascript" src="{{ url_for('static', filename='js/node_handling/resetDisplayTaxaBox.js') }}"></script>
  <script language="javascript" type="text/javascript" src="{{ url_for('static', filename='js/node_handling/taxaRequest.js') }}"></script>
  <script language="javascript" type="text/javascript" src="{{ url_for('static', filename='js/input_file_handling/fileSliderHandler.js') }}"></script>
  <script language="javascript" type="text/javascript" src="{{ url_for('static', filename='js/node_handling/custom_colors.js') }}"></script>
  <script language="javascript" type="text/javascript" src="{{ url_for('static', filename='js/node_handling/circle_nodes.js') }}"></script>
  <script language="javascript" type="text/javascript" src="{{ url_for('static', filename='js/node_handling/node_removal_taxa.js') }}"></script>
  <script language="javascript" type="text/javascript" src="{{ url_for('static', filename='js/node_handling/toggle_nodes.js') }}"></script>
  <script language="javascript" type="text/javascript" src="{{ url_for('static', filename='js/node_handling/node-positioning.js') }}"></script>
  <script language="javascript" type="text/javascript" src="{{ url_for('static', filename='js/node_handling/AddAllNodesLinks.js') }}"></script>
  <script language="javascript" type="text/javascript" src="{{ url_for('static', filename='js/node_handling/popupControls.js') }}"></script>
  <script language="javascript" type="text/javascript" src="{{ url_for('static', filename='js/node_handling/reads_coloring.js') }}"></script>
  <script language="javascript" type="text/javascript" src="{{ url_for('static', filename='js/node_handling/advancedFilters.js') }}"></script>
  <script language="javascript" type="text/javascript" src="{{ url_for('static', filename='js/input_file_handling/input_file_handler.js') }}"></script>
  <script language="javascript" type="text/javascript" src="{{ url_for('static', filename='js/input_file_handling/importJsonSamples.js') }}"></script>
  <!--<script language="javascript" type="text/javascript" src="{{ url_for('static', filename='js/input_file_handling/assembly_file_handler.js') }}"></script>-->
  <script language="javascript" type="text/javascript" src="{{ url_for('static', filename='js/graph_control/zooming_control.js') }}"></script>
  <script language="javascript" type="text/javascript" src="{{ url_for('static', filename='js/graph_control/legendFunctions.js') }}"></script>
  <script language="javascript" type="text/javascript" src="{{ url_for('static', filename='js/input_file_handling/dropdownPopulation.js') }}"></script>
  <script language="javascript" type="text/javascript" src="{{ url_for('static', filename='js/download/download_sequences.js') }}"></script>
  <script language="javascript" type="text/javascript" src="{{ url_for('static', filename='js/download/abrPlusFamilies.js') }}"></script>
  <script language="javascript" type="text/javascript" src="{{ url_for('static', filename='js/devel/makeHash.js') }}"></script>
  <script language="javascript" type="text/javascript" src="{{ url_for('static', filename='js/devel/get-node-positions.js') }}"></script>
  <script language="javascript" type="text/javascript" src="{{ url_for('static', filename='js/graph_control/overlay-graph.js') }}"></script>
  <script language="javascript" type="text/javascript" src="{{ url_for('static', filename='js/stats/quick_stats.js') }}"></script>
  <script language="javascript" type="text/javascript" src="{{ url_for('static', filename='js/stats/sort_array_by_value.js') }}"></script>
  <script language="javascript" type="text/javascript" src="{{ url_for('static', filename='js/stats/table_handling.js') }}"></script>
  <script language="javascript" type="text/javascript" src="{{ url_for('static', filename='js/projects/importProjects.js') }}"></script>

  <!--<link rel="stylesheet" type="text/css" href="patlas/db_manager/db_app/static/css/visualization_functions.css"/>-->

</head>

<body onload=onLoadWelcome(onLoad)>

<div id="loading">
  <img id="loading-image" src="{{ url_for('static', filename='images/loading.gif') }}" alt="Loading..." ondblclick="alternativeLoading()"/>
  <!-- Courtesy of Mickael Silva -->
  <img id="loading-image-alt" src="{{ url_for('static', filename='images/pok_easter.gif') }}" alt="Loading..." />
</div>

<!-- welcome modal -->
<div class="modal fade" id="welcomeModal" data-backdrop="static"
     role="dialog" tabindex="-1">
  <div class="modal-dialog" id="welcomeDialog" style="width: 80%">
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal">&times;</button>
        <img src="{{ url_for('static', filename='images/logo.png') }}"
             alt="pATLAS" style="width:30%;height:auto; display:block;
                     margin:auto;"/>
      </div>
      <div class="modal-body">
        <h1>Welcome to Plasmid Atlas</h1>
        <p class="mainText">Plasmid Atlas is a web interface that allow
          users to
          browse plasmid sequences available in the NCBI refseq
          database. Here you can obtain metadata related with the
          available plasmid sequences, such as species in which
          they were described, antibiotic resistance information
          and much more.</p>

        <p class="mainText">We are always happy
          to improve user experience, so if you
          find any
          <a class="github-button" href="https://github.com/tiagofilipe12/pATLAS/issues"
             aria-label="Issue tiagofilipe12/pATLAS on GitHub">Issue</a>
          please report them to us. You can also contact us in
          <a href="https://gitter.im/plasmidATLAS/Lobby" target="_blank">
            <img src="{{ url_for('static', filename='images/Lobby.png') }}"
                 alt="gitter" style="width: auto; height: auto"/></a>.
        </p>
        <p class="mainText"><b>Note:</b> pATLAS was tested for Google
          Chrome, Firefox, Safari and Microsoft Edge, however
          we recommend using Google Chrome
          <img src="{{ url_for('static', filename='images/chrome_logo.png') }}"
               style="width: 30px; height: 30px"/> for a better experience.
        </p>
      </div>
      <div>
        <a title="Web Analytics" href="http://statcounter.com/"
           target="_blank">
          <img src="//c.statcounter.com/11567956/0/ab4c856f/1/"
               alt="Web Analytics" >
        </a>
      </div>
      <div class="modal-footer">
        <div id="counternclose"
             style="position: absolute; left:3%; bottom: 3%;">
          <div id="counter" style="float: left">Closing in: 30s</div>
          <button type="button" class="close" id="counterClose"
                  style="float: right; margin-left: 4px; opacity: 1;">&times;
          </button>
        </div>
        <button type="close" class="btn btn-default"
                data-dismiss="modal" id="welcomeDismiss">Dismiss
        </button>
      </div>
    </div>
  </div>
</div>

<!-- about modal -->
<div class="modal fade" id="aboutModal" data-backdrop="static"
     role="dialog" tabindex="-1">
  <div class="modal-dialog" id="aboutDialog" style="width: 80%">
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal">&times;</button>
        <img src="{{ url_for('static', filename='images/logo.png') }}"
             alt="pATLAS" style="width:30%;height:auto; display:block;
                     margin:auto;"/>
      </div>
      <div class="modal-body" id="aboutModalBody">
        <h1><b>Plasmid Atlas</b></h1>
        <a class="github-button" href="https://github.com/tiagofilipe12/pATLAS"
           data-size="large"
           aria-label="Star tiagofilipe12/pATLAS on GitHub">Star</a>
        <a class="github-button" href="https://github.com/tiagofilipe12/pATLAS/issues"
           data-size="large"
           aria-label="Issue tiagofilipe12/pATLAS on GitHub">Issue</a>
        <p class="mainText">
          pATLAS is a web-based tool enabling searching for a
          specific plasmid (or plasmids) of interest, visualize the
          available plasmid database and to identify plasmids
          contained in High Throughput Sequencing data.
        </p>

        <h3><b>Version:</b> 1.3.0</h3>
        <p class="mainText">
        </p>
        <h3><b>Last pATLAS database update:</b> 18 April 2018</h3>
        <h4><b>Last NCBI database update:</b> 12 January 2018</h4>
        <h4><b>Mash version:</b> 2.0</h4>
        <h4><b>Abricate version:</b> 0.7</h4>
        <p class="mainText">
        </p>
        <h3><b>Dev team</b></h3>
        <li><a href="http://darwin.phyloviz.net/dokuwiki/doku.php?id=people:tfjesus"
               target="_blank" style="color:#6292A9;">Tiago F. Jesus</a>
        </li>
        <li><a href="http://darwin.phyloviz.net/dokuwiki/doku.php?id=people:bgoncalves"
               target="_blank" style="color:#6292A9;">Bruno F. R. Gonçalves</a>
        </li>
        <li>
          <a href="https://github.com/ODiogoSilva"
             target="_blank" style="color:#6292A9;">
            Diogo N. Silva
          </a>
        </li>
        <li><a href="http://darwin.phyloviz.net/dokuwiki/doku.php?id=people:ramirez"
               target="_blank" style="color:#6292A9;">Mário Ramirez</a>
        </li>
        <li><a href="http://darwin.phyloviz.net/dokuwiki/doku.php?id=people:jcarrico"
               target="_blank" style="color:#6292A9;">João A. Carriço</a>
        </li>
        <h3><b>Acknowledgements</b></h3>
        <p class="mainText">
        <li>FCT - "Fundação para a Ciência e a Tecnologia"and
          BacGenTrack (TUBITAK/0004/2014)
          <br>[FCT/ Scientific and
          Technological Research Council of Turkey (Türkiye Bilimsel
          ve Teknolojik Araşrrma Kurumu, TÜBİTAK)]</li>
        <br>
        <li><a href="https://fhs.mcmaster.ca/biochem/mcarthur_andrew.html"
               target="_blank" style="color:#6292A9;">Andrew McArthur</a>
        </li>
        <li><a href="https://genomeinformatics.github.io/people/phillippy/"
               target="_blank" style="color:#6292A9;">Adam Phillippy</a>
        </li>
        <li><a href="http://darwin.phyloviz.net/dokuwiki/doku.php?id=people:cmendes"
               target="_blank" style="color:#6292A9;">Catarina Inês Mendes</a>
        </li>
        <li><a href="https://www.rug.nl/staff/n.monge.gomes.do.couto/"
               target="_blank" style="color:#6292A9;">Natacha Couto</a>
        </li>
        </p>
        <h3><b>Contact us</b></h3>
        <a href="https://gitter.im/plasmidATLAS/Lobby" target="_blank">
          <img src="{{ url_for('static', filename='images/Lobby.png') }}"
               alt="gitter"></a>
      </div>
      <div class="modal-footer">
        <button type="close" class="btn btn-default"
                data-dismiss="modal" id="aboutDismiss">Close
        </button>
      </div>
    </div>
  </div>
</div>

<!--modal for video tutorials-->

<div class="modal fade" id="formModal" data-backdrop="static"
     role="dialog" tabindex="-1">
  <div class="modal-dialog" id="formDialog" style="width: 60%">
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal">&times;</button>
        Frequently asked questions
      </div>
      <div class="modal-body" id="formModalBody">
        {% include 'faqs.html' %}
      </div>
      <div class="modal-footer">
        <button type="close" class="btn btn-default"
                data-dismiss="modal" id="formDismiss">Close
        </button>
      </div>
    </div>
  </div>
</div>

<div class="modal fade" id="videoModal" data-backdrop="static"
     role="dialog" tabindex="-1">
  <div class="modal-dialog" id="videoDialog" style="width: 60%">
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal">&times;</button>
        Video tutorial
        <!--<img src="{{ url_for('static', filename='images/logo.png') }}"-->
        <!--alt="pATLAS" style="width:30%;height:auto; display:block;-->
        <!--margin:auto;"/>-->
      </div>
      <div class="modal-body" id="videoModalBody">
        <!--<h2 align="center"><b>Video tutorial</b></h2>-->
        <iframe width="640" height="360"
                src="https://www.youtube.com/embed/?listType=playlist&list=PLLfKDCSD5M06VJzT5e-_YFKvWwvHUOkFI"
                frameborder="0" gesture="media" allow="encrypted-media"
                allowfullscreen id="youtubeFrame">
        </iframe>
        Note: Use "CC" button on YouTube player to display subtitles
      </div>
      <div class="modal-footer">
        <button type="close" class="btn btn-default"
                data-dismiss="modal" id="videoDismiss">Close
        </button>
      </div>
    </div>
  </div>
</div>

<!-- Modal for heatmap-->
<div id="heatmapModal" class="modal fade" data-backdrop="static" role="dialog"
     tabindex="-1">
  <div class="modal-dialog" style="width: 80%">
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal">&times;</button>
        <h4 class="modal-title">Heatmap for all imported samples</h4>
      </div>
      <div class="modal-body table-responsive" id="modalHeatBody">
        <div id="chartContainer2">
          <b> Warning: </b>No information available. Please
          check that reads
          json files are imported, given that this options
          is used for comparison between samples.
        </div>
      </div>
    <!--</div>-->
    <div class="modal-footer">
      <button type="button" class="btn btn-default btn-circle"
              data-toggle="popover" data-placement="right"
              data-trigger="focus"
              data-original-title="Heatmap controls"
              data-content="Test"
              data-html="true"
              aria-describedby="tooltip" style="position: absolute;
                        left:2%"
              id="questionHeatmap">
        <span class="glyphicon glyphicon-question-sign"></span>
      </button>
      <button type="submit" class="btn btn-default"
              data-dismiss="modal" id="heatSubmit"
      >Ok
      </button>
      <!--<button class="btn btn-danger" id="cancelTable">Close-->
      <!--</button>-->
    </div>
  </div>
</div>
</div>

<!-- Modal for table-->
<div id="tableModal" class="modal fade" data-backdrop="static" role="dialog"
     tabindex="-1">
  <div class="modal-dialog" style="width: 80%">
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal">&times;</button>
        <h4 class="modal-title">Table for selected plasmids
          metadata</h4>
      </div>
      <div class="modal-body table-responsive" id="modalTableBody">
        <div id="toolbar">
          <button class="btn btn-default" id="downloadTable"
                  type="button" data-toogle="tooptip"
                  title="Download selection">
            <span class="glyphicon glyphicon-download-alt"></span>
          </button>
        </div>
        <table class="table" id="metadataTable"
               data-striped="true"
               data-search="true"
               data-show-toggle="true"
               data-show-columns="true"
               data-query-params="queryParams"
               data-pagination="true"
               data-page-list = "10, 25, 50, 100, ALL"
               data-height="550"
               data-show-export="true"
               data-click-to-select="true"
               data-toolbar="#toolbar">
        </table>
      </div>
      <!--</div>-->
      <div class="modal-footer">
        <button type="button" class="btn btn-default btn-circle"
                data-toggle="popover" data-placement="right"
                data-trigger="focus"
                data-original-title="Table controls"
                data-content="<li>Double left mouse click in cell -
                        recenters graph on that plasmid</li>
                        <li>Single left mouse click in cell - selects row</li>"
                data-html="true"
                aria-describedby="tooltip" style="position: absolute;
                        left:2%"
                id="questionTable">
          <span class="glyphicon glyphicon-question-sign"></span>
        </button>
        <button type="submit" class="btn btn-default"
                data-dismiss="modal" id="tableSubmit"
                title="Highlight selected accessions on graph">Submit
        </button>
        <button class="btn btn-danger" id="cancelTable">Close
        </button>
      </div>
    </div>
  </div>
</div>

<!-- Modal for file loading-->
<div id="fileModal" class="modal fade" role="dialog" tabindex="-1">
  <div class="modal-dialog">

    <!-- Modal content for file-->
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal">&times;</button>
        <h4 class="modal-title">Select input file (mapping results)</h4>
      </div>
      <div class="modal-body" id="modal-body-file">
        <div class="row uploadFile" id="uploadFile">
          <div class="input-group col-md-12">
            <label class="input-group-btn">
                    <span class="btn btn-info btn-file" id="span_1stFile">
                      Upload file&hellip;<input id="infile" type="file"
                                                name="file" style="display:
                                                none;" multiple>
                    </span>
            </label>
            <input type="text" class="form-control" id="file_text" readonly autocomplete="off">
          </div>
        </div>
        <!--checkbox-->
        <!--<div class="row uploadFileCheck" id="uploadFileCheck">-->
        <!--<form>-->
        <!--<div>-->
        <!--<label class="label_file">-->
        <!--<input type="checkbox" class="check_file"-->
        <!--autocomplete="off"/> Check for pairwise comparison mode-->
        <!--</label>-->
        <!--</div>-->
        <!--</form>-->
        <div id="mappingCutoffWrapper">
          <div class="form-group">Provide a
            value for percentage of plasmid converage between 0 and 1.
            Tip: default is 0.6.
            <input type="text" id="cutoffValue"
                   class="form-control"
                   placeholder="0.6"/>
          </div>
        </div>
        <!--</div>-->
        <div class="panel panel-info">
          <div class="panel-heading"  style="background-color:#6292A9; color: white">How to run</div>
          <div class="panel-body">
            {% include 'mapping.html' %}
          </div>
        </div>
        <div class="sampleImportWrapperClass">
          <button type="submit" class="btn btn-sm sampleImportClass"
                  data-dismiss="modal" id="sampleMapping"
                  title="This will load an example dataset"
          >Load sample dataset...
          </button>
          <button type="button" class="btn btn-default btn-circle"
                  data-toggle="popover"
                  data-trigger="focus"
                  data-original-title="Reference"
                  data-content="<b>Citation:</b> Tacão, M., Tavares, R. dos S.,
                            Teixeira, P., Roxo, I., Ramalheira, E., Ferreira,
                            S., & Henriques, I. (2017). Mcr-1 and blakpc-3in
                            <i>Escherichia coli</i> sequence type 744 after meropenem
                            and colistin therapy, Portugal. Emerging Infectious
                            Diseases, 23(8), 1419–1421.
                            <br>
                            <b>SRA accession:</b> SRR5201504"
                  data-html="true"
                  aria-describedby="tooltip"
                  id="infoMap">
            <span class="glyphicon glyphicon-info-sign"></span>
          </button>
        </div>
      </div>

      <div class="modal-footer">
        <button type="submit" class="btn btn-default" data-dismiss="modal" id="fileSubmit">Ok</button>
        <button class="btn btn-danger" id="cancel_infile">Clear selection</button>
        <button type="button" class="btn btn-default btn-circle"
                data-toggle="popover"
                data-trigger="focus"
                data-original-title="Mappping import help"
                data-content="Here you have two modes:
                        <li>Standard mode - in which you may import a file with
                        the coverage for a read file or files</li>
                        <li>Pairwise comparison mode - in which you import a file with
                        the comparisons between two json files generated by
                        PlasmidUNCoverage.py and use
                        <a href='https://github.com/tiagofilipe12/PlasmidCoverage#--accessory-tools'
                        target='_blank'>diffs_json.py</a> to generate a new
                        json that can be imported. This json has the difference
                        between the two libraries compared.
                        </li>"
                data-html="true"
                aria-describedby="tooltip" style="position: absolute;
                        left:2%;"
                id="questionMap">
          <span class="glyphicon glyphicon-question-sign"></span>
        </button>
      </div>
    </div>

  </div>
</div>

<!-- Modal for mash file loading-->
<div id="mashModal" class="modal fade" role="dialog" tabindex="-1">
  <div class="modal-dialog">

    <!-- Modal content for file-->
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal">&times;</button>
        <h4 class="modal-title">Select input file (mash results)</h4>
      </div>
      <div class="modal-body" id="modal-body-mash">
        <div class="row uploadFile" id="uploadFileMash">
          <div class="input-group col-md-12">
            <label class="input-group-btn">
                    <span class="btn btn-info btn-file" id="span_1stFileMash">
                      Upload file&hellip;<input id="mashInfile"
                                                type="file"
                                                name="file"
                                                style="display: none;" multiple>
                    </span>
            </label>
            <input type="text" class="form-control" id="file_text_mash"
                   readonly
                   autocomplete="off">
          </div>
        </div>
        <!--checkbox-->
        <!--<div class="row uploadFileCheck" id="uploadFileCheckMash">-->

        <div>
          <div class="form-group">Provide a
            value for the minimum identity to display. Tip: must be between 0
            and 1.
            <input id="cutoffValueMash" type="text" class="form-control"
                   placeholder="0.9"/>
          </div>
          <div class="form-group" id="copyNumberCheck">Provide an integer
            value for minimum copy number to represent. Tip: must be >= 2.
            <input id="copyNumberValue" type="text" class="form-control"
                   placeholder="1"/>
          </div>

        </div>
        <!--</div>-->
        <div class="panel panel-info">
          <div class="panel-heading" style="background-color:#6292A9; color: white">How to run</div>
          <div class="panel-body">
            {% include 'mash_screen.html' %}
          </div>
        </div>
        <div class="sampleImportWrapperClass">
          <button type="submit" class="btn btn-sm sampleImportClass"
                  data-dismiss="modal" id="sampleMash"
                  title="This will load an example dataset"
          >Load sample dataset...
          </button>
          <button type="button" class="btn btn-default btn-circle"
                  data-toggle="popover"
                  data-trigger="focus"
                  data-original-title="Reference"
                  data-content="<b>Citation:</b> Tacão, M., Tavares, R. dos S.,
                            Teixeira, P., Roxo, I., Ramalheira, E., Ferreira,
                            S., & Henriques, I. (2017). Mcr-1 and blakpc-3in
                            <i>Escherichia coli</i> sequence type 744 after meropenem
                            and colistin therapy, Portugal. Emerging Infectious
                            Diseases, 23(8), 1419–1421.
                            <br>
                            <b>SRA accession:</b> SRR5201504"
                  data-html="true"
                  aria-describedby="tooltip"
                  id="infoMash">
            <span class="glyphicon glyphicon-info-sign"></span>
          </button>
        </div>
      </div>

      <div class="modal-footer">

        <button type="submit" class="btn btn-default" data-dismiss="modal"
                id="fileSubmit_mash">Ok</button>
        <button class="btn btn-danger" id="cancel_infile_mash">Clear
          selection</button>
      </div>
    </div>

  </div>
</div>

<!-- Modal for file loading assembly-->
<div id="assemblyModal" class="modal fade" role="dialog" tabindex="-1">
  <div class="modal-dialog">

    <!-- Modal content for lenght-->
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal">&times;</button>
        <h4 class="modal-title">Select input file (sequence import)</h4>
      </div>
      <div class="modal-body" id="modal-body-fileAssembly">
        <div class="row uploadFile" id="uploadFileAssembly">
          <div class="input-group col-md-12">
            <label class="input-group-btn">
                    <span class="btn btn-info btn-file"
                          id="span_1stFileAssembly">
                      Upload file&hellip;<input id="assemblyfile" type="file"
                                                name="file" style="display: none;"
                                                multiple>
                    </span>
            </label>
            <input type="text" class="form-control" id="assembly_text" readonly autocomplete="off">
          </div>
        </div>
        <div>
          <div class="form-group">Provide a
            value for sequence similarity between 0 and 1. Tip: default is 0.9.
            <input stype="text" id="cutoffValueSeq"
                   class="form-control"
                   placeholder="0.9"/>
          </div>
          <div class="form-group">Provide a
            value for shared hashes between plasmids and query sequence ranging
            from 0 to 1. Tip: default is 0.8.
            <input stype="text" id="cutoffHashSeq"
                   class="form-control"
                   placeholder="0.8"/>
          </div>
        </div>
        <div class="panel panel-info">
          <div class="panel-heading" style="background-color:#6292A9; color: white">How to run</div>
          <div class="panel-body">
            {% include 'assembly.html' %}
          </div>
        </div>
        <div class="sampleImportWrapperClass">
          <button type="submit" class="btn btn-sm sampleImportClass"
                  data-dismiss="modal" id="sampleAssembly"
                  title="This will load an example dataset"
          >Load sample dataset...
          </button>
          <button type="button" class="btn btn-default btn-circle"
                  data-toggle="popover"
                  data-trigger="focus"
                  data-original-title="Reference"
                  data-content="<b>Citation:</b> Stoesser, N.,
                            Sheppard, A. E., Peirano, G., Anson, L. W.,
                            Pankhurst, L., Sebra, R., Phan, H. T. T., Kasarskis,
                            A., Mathers, A. J., Peto, T. E. A., Bradford, P.,
                            Motyl, M. R., Walker, A. S., Crook, D. W. & Pitout, J. D. (2017).
                            Genomic epidemiology of global <i>Klebsiella pneumoniae</i>
                            carbapenemase (KPC)-producing <i>Escherichia coli</i>.
                            Scientific Reports, 7(1), 1–11.
                            <br>
                            <b>Accession numbers:</b> LT599828.1; LT599827.1"
                  data-html="true"
                  aria-describedby="tooltip"
                  id="infoAssembly">
            <span class="glyphicon glyphicon-info-sign"></span>
          </button>
        </div>
      </div>

      <div class="modal-footer">

        <button type="submit" class="btn btn-default" data-dismiss="modal" id="assemblySubmit">Ok</button>
        <button class="btn btn-danger" id="cancel_assembly">Clear selection</button>
      </div>
    </div>

  </div>
</div>

{% include 'consensus.html' %}

<!-- Modal for distances-->
<div id="distancesModal" class="modal fade" role="dialog" tabindex="-1">
  <div class="modal-dialog">

    <!-- Modal content for lenght-->
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal">&times;</button>
        <h4 class="modal-title">Display distances with a gradient of color?</h4>
      </div>
      <div class="modal-body" id="modal-body-scheme">
        <div class="dropdown" id="color_scheme">
          <div class="header_taxa">Select a color scheme</div>
          <select class="selectpicker" data-dropup-auto="false"
                  title="Green color scheme" id="colorForm"
                  width="auto" data-size="7"
                  data-header="Select a color">
            <option></option>
            <option data-content="<span class='label label-success'>Green color scheme</span">Green color scheme</option>
            <option data-divider="true"></option>
            <option data-content="<span class='label label-primary'>Blue color scheme</span">Blue color scheme</option>
            <option data-divider="true"></option>
            <option data-content="<span class='label label-danger'>Red color scheme</span">Red color scheme</option>
            <option></option>
          </select>
        </div>
      </div>
      <div class="modal-footer">
        <button type="submit" class="btn btn-default" data-dismiss="modal" id="distancesSubmit">Yes</button>
        <button type="submit" class="btn btn-default" data-dismiss="modal" id="distancesCancel">No</button>
      </div>
    </div>

  </div>
</div>

<!-- Modal for length-->
<div id="lengthModal" class="modal fade" role="dialog" tabindex="-1">
  <div class="modal-dialog">

    <!-- Modal content for lenght-->
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal">&times;</button>
        <h4 class="modal-title">Filter nodes by sequence length</h4>
      </div>
      <div class="modal-body" id="modal-body-length">
        <div class="row">
          <div class='col-md-6' id="min-modal">
            <h6 class="header_taxa">Set minimum:</h6>
            <input id="slider_input_min" min="1" type="number" step="1000">
          </div>
          <div class='col-md-6' id="max-modal">
            <h6 class="header_taxa">Set maximum:</h6>
            <input id="slider_input_max" min="1" type="number" step="1000">
          </div>
        </div>
        <div class="row">
          <div class='col-md-12'>
            <div class="sliders noUi-target" id="slider"></div>
          </div>
        </div>
      </div>
      <div class="modal-footer">
        <button type="submit" class="btn btn-default" data-dismiss="modal" id="lengthSubmit">Ok</button>
      </div>
    </div>

  </div>
</div>


<!-- Modal for length-->
<div id="ratioModal" class="modal fade" role="dialog" tabindex="-1">
  <div class="modal-dialog">
    <!-- Modal content for ratio-->
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal">&times;</button>
        <h4 class="modal-title">Filter links by size ratio between
          pairs of plasmids
        </h4>
      </div>
      <div class="modal-body" id="modal-body-ratio">
        <div class="col-sm-4">
          <div class="header_taxa">Max difference (%)</div>
          <div class="form-group" data-toggle="tooltip"
               title="Provide a value between 100 and 0">
            <input id="formRatio" type="text" class="form-control"
                   placeholder="Default value = 30" value="30"/>
          </div>
        </div>
        <div class="col-sm-4">
          <div class="header_taxa">Pick a color</div>
          <div id="cp4"
               class="input-group colorpicker-component"
               title="Using color option">
            <input type="text" class="form-control"
                   id="cp4Form"/>
            <span class="input-group-addon"><i></i></span>
          </div>
        </div>
        <div class="col-sm-4">
          <div class="header_taxa">Remove links?</div>
          <div>
            <input data-toggle="toggle" type="checkbox"
                   data-onstyle="success" data-offstyle="default"
                   data-on="Remove links on"
                   data-off="Remove links off"
                   data-width="100%"
                   id="toggleRatio">
          </div>
        </div>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-default btn-circle"
                data-toggle="popover"
                data-trigger="focus"
                data-original-title="Size ratio help"
                data-content="Here you can color or remove links based
                        on the ratio between the size of two plasmids.
                        <li>Max difference (%) - This cutoff sets the maximum
                        percentage difference between two plasmids. By default the
                        smaller plasmid need to have at least 70% of the size of the
                        larger plasmid. All other links that does not respect this
                        criteria will be highlighted or removed.</li>
                        <li>Pick a color - allows the user to pick a color to
                        highlight desired links. This is the default behavior
                        of submit button, however if remove links is 'on', this
                        will be ignored since links will be removed.</li>
                        <li>Remove links? - This button allows to remove links
                        or not. By default it is set to 'off'.</li>"
                data-html="true"
                aria-describedby="tooltip" style="position: absolute;
                        left:2%;"
                id="questionRatio">
          <span class="glyphicon glyphicon-question-sign"></span>
        </button>
        <button type="submit" class="btn btn-default"
                data-dismiss="modal" id="ratioSubmit">Submit</button>
      </div>
    </div>
  </div>
</div>

<!-- Modal for taxa-->
<div id="taxaModal" class="modal fade" role="dialog" tabindex="-1">
  <div class="modal-dialog">

    <!-- Modal content for lenght-->
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal">&times;</button>
        <h4 class="modal-title">Filter nodes by species taxa</h4>
      </div>
      <div class="modal-body" id="modal-body-taxa">

        <!--adds taxa dropdowns-->
        {% include 'taxa_filters.html' %}

        <div class="row" id="modal-body-taxa-2">
          <div class='col-md-12'>
            <div class="panel-group" id="displayCurrent">
              <div class="panel panel-info" >
                <div class="panel-heading">Current filters</div>
                <div class="panel-body" id="displayCurrentBox">
                  <!--Populated by visualization_functions.js-->
                  <p id="p_Order">Order:</p>
                  <p id="p_Family">Family:</p>
                  <p id="p_Genus">Genus:</p>
                  <p id="p_Species">Species:</p>
                </div>
              </div>
            </div>
          </div>
        </div>

        <div style="text-align: center">
          <button class="btn btn-info" href="#" data-dismiss="modal"
                  data-toggle="modal" data-backdrop="static"
                  data-target="#plasmidFamiliesModal"
                  id="familiesCombined" >+ Plasmid families
          </button>
          <button class="btn btn-info" href="#" data-dismiss="modal"
                  data-toggle="modal" data-backdrop="static"
                  data-target="#resModal"
                  id="resistancesCombined" >+ Resistances
          </button>
          <button class="btn btn-info" href="#" data-dismiss="modal"
                  data-toggle="modal" data-backdrop="static"
                  data-target="#virModal"
                  id="virulenceCombined" >+ Virulence
          </button>
        </div>

      </div>
      <div class="modal-footer">
        <button type="submit" class="btn btn-default"
                data-dismiss="modal" id="taxaModalSubmit">Submit</button>
        <button type="submit" class="btn btn-danger"
                id="taxaModalClear">Clear selection</button>
      </div>
    </div>
  </div>
</div>

<!--Alert message when a file is too big to download-->
<div class="alert alert-warning alert-dismissable fade in" id="alertNCBI"
     style="display: none">
  <button type="button" class="close" id="alertCloseNCBI"
          aria-hidden="true" data-hide="true">&times;</button>
  <strong>Warning!</strong> File is too big, download will be split
  into batches 100 sequences. Note that this behavior will open several
  windows
</div>

<div class="alert alert-warning alert-dismissable fade in" id="alertNoSelection"
     style="display: none">
  <button type="button" class="close" id="alertNoSelectionClose"
          aria-hidden="true" data-hide="true">&times;</button>
  No selection was made! Please make a selection before attempting to filter.
</div>

<div class="alert alert-info alert-dismissable fade in" id="alertAssembly"
     style="display: none">
  <button type="button" class="close" id="alertCloseAssembly"
          aria-hidden="true" data-hide="true">&times;</button>
  Use play button to let red nodes/circles converge with their related
  plasmids (orange nodes/circles). They will converge with the orange nodes.
</div>

<!--Alert message to check that some selection is made-->
<div class="alert alert-danger alert-dismissable fade in" id="alertId" style="display: none">
  <button type="button" class="close" id="alertClose" aria-hidden="true" data-hide="true">&times;</button>
  <strong>Warning!</strong> No filters were selected. No changes will be made!
</div>

<!--Alert message to check that some selection is made-->
<div class="alert alert-warning alert-dismissable fade in" id="alertId_multi" style="display: none">
  <button type="button" class="close" id="alertClose_multi" aria-hidden="true" data-hide="true">&times;</button>
  <strong>Attention!</strong> Multiple levels of taxa were selected. Output will highlight all selected taxa in  <font color="#f71735">red!</font>
</div>

<!--Alert message to check that some selection is made-->
<div class="alert alert-warning alert-dismissable fade in" id="alertId_search"
     style="display: none">
  <button type="button" class="close" id="alertClose_search"
          aria-hidden="true" data-hide="true">&times;</button>
  <strong>Warning!</strong> Are you sure this search is valid? Make sure
  the toggle on the left is properly set.
</div>

<!--Alert message to check that some selection is made-->
<div class="alert alert-danger alert-dismissable fade in" id="alertId_node" style="display: none">
  <button type="button" class="close" id="alertClose_node" aria-hidden="true" data-hide="true">&times;</button>
  <strong>Warning!</strong> To enable filter dropdown options, disable "Node mode on" on the leftside switcher!
</div>

<!--Alert message to check that some selection is made-->
<div class="alert alert-danger alert-dismissable fade in" id="alertId_db"
     style="display: none">
  <!--To be filled upon error handling -->
  <button type="button" class="close" id="alertClose_db" aria-hidden="true"
          data-hide="true">&times;</button>
</div>

<!--Alert message to check that some selection is made-->
<div class="alert alert-danger alert-dismissable fade in" id="alertId_noFiles"
     style="display: none">
  <button type="button" class="close" id="alertClose_noFile" aria-hidden="true"
          data-hide="true">&times;</button>
  <strong>Warning!</strong> No files were added.
</div>

<div class="alert alert-info alert-dismissable fade in" id="alertId_noResults"
     style="display: none">
  <button type="button" class="close" id="alertClose_noResults" aria-hidden="true"
          data-hide="true">&times;</button>
  <strong>Warning!</strong> This file has no results for the filters applied.
  Try to change the parameters provided through import menu.
</div>

<!--Alert message to check that some selection is made-->
<div class="alert alert-danger alert-dismissable fade in" id="alertJsonFile"
     style="display: none">
  <button type="button" class="close" id="alertCloseJsonFile" aria-hidden="true"
          data-hide="true">&times;</button>
  <div id="alertJsonFileText"><!--To be filled upon error handling --></div>
</div>

<div id="wrapper" class="toggled">
  <!-- Sidebar -->
  <div id="sidebar-wrapper">
    <img src="{{ url_for('static', filename='images/logo.png') }}" alt="pATLAS" style="width:100%;height:auto;"/>
    <ul class="sidebar-nav" id="sidebar-menus">
      <li class="sidebar-brand">
        <!--unused space filled with img-->
      </li>
      <div id="collapseGroup">
      <li data-toggle="collapse" data-target="#collapse1" class="collapse_groups">
        <a href="#">Browse</a>
        <div id="collapse1" class="panel-collapse collapse">
          <ul class="list-group headerPanelGroup">Metadata
            <button class="list-group-item" href="#"
                    data-toggle="modal" data-backdrop="static"
                    data-target="#distancesModal" id="distances_filter">
              Distances</button>
            <button class="list-group-item" href="#"
                    data-toggle="modal" data-backdrop="static"
                    data-target="#lengthModal" id="length_filter">Length
            </button>
            <button class="list-group-item" href="#"
                    data-toggle="modal" data-backdrop="static"
                    data-target="#ratioModal"
                    id="ratio_filter">Size ratio
            </button>
            <button class="list-group-item" href="#"
                    data-toggle="modal" data-backdrop="static"
                    data-target="#taxaModal" id="taxa_filter">Taxa
            </button>
          </ul>
          <ul class="list-group headerPanelGroup">Annotation
            <button class="button list-group-item" href="#"
                    data-toggle="modal" data-backdrop="static"
                    data-target="#plasmidFamiliesModal"
                    id="familiesFilter" >Plasmid families
            </button>
            <button class="button list-group-item" href="#"
                    data-toggle="modal" data-backdrop="static"
                    data-target="#resModal"
                    id="resistancesFilter" >Resistances
            </button>
            <button class="button list-group-item" href="#"
                    data-toggle="modal" data-backdrop="static"
                    data-target="#virModal"
                    id="virulenceFilter" >Virulence
            </button>
          </ul>
          <ul class="list-group headerPanelGroup">Advanced
            <button class="list-group-item" href="#"
                    data-toggle="modal" data-backdrop="static"
                    data-target="#combinedModal" id="combinedSelections">
              Multiple</button>
          </ul>
        </div>
      </li>
      <li data-toggle="collapse" data-target="#collapse3" class="collapse_groups">
        <a href="#">Import results</a>
        <div id="collapse3" class="panel-collapse collapse">
          <ul class="list-group">
            <button class="list-group-item" href="#" data-toggle="modal" data-backdrop="static"
                    data-target="#fileModal" id="reads_filter">Mapping
            </button>
            <button class="list-group-item" href="#" data-toggle="modal" data-backdrop="static"
                    data-target="#mashModal" id="mash_filter">Mash screen
            </button>
            <button class="list-group-item" href="#" data-toggle="modal" data-backdrop="static"
                    data-target="#assemblyModal" id="assembly_filter">Sequence
            </button>
            <button class="list-group-item" href="#" data-toggle="modal" data-backdrop="static"
                    data-target="#consensusModal" id="consensus_filter">Consensus
            </button>
          </ul>
        </div>
      </li>
      <li data-toggle="collapse" data-target="#collapse4"
          class="collapse_groups">
        <a href="#">Statistics</a>
        <div id="collapse4" class="panel-collapse collapse">
          <ul class="list-group headerPanelGroup">Taxa
            <button class="list-group-item" href="#" data-toggle="modal" data-backdrop="static"
                    data-target="#modalPlot"
                    id="speciesStats">Species
            </button>
            <button class="list-group-item" href="#" data-toggle="modal" data-backdrop="static"
                    data-target="#modalPlot"
                    id="genusStats">Genera
            </button>
            <button class="list-group-item" href="#" data-toggle="modal" data-backdrop="static"
                    data-target="#modalPlot"
                    id="familyStats">Families
            </button>
            <button class="list-group-item" href="#" data-toggle="modal" data-backdrop="static"
                    data-target="#modalPlot"
                    id="orderStats">Orders
            </button>
          </ul>
          <ul class="list-group headerPanelGroup">Annotation
            <button class="list-group-item" href="#" data-toggle="modal" data-backdrop="static"
                    data-target="#modalPlot"
                    id="resistanceStats">Resistances
            </button>
            <button class="list-group-item" href="#" data-toggle="modal" data-backdrop="static"
                    data-target="#modalPlot"
                    id="pfamilyStats">Plasmid families
            </button>
            <button class="list-group-item" href="#" data-toggle="modal" data-backdrop="static"
                    data-target="#modalPlot"
                    id="virStats">Virulence
            </button>
          </ul>
          <ul class="list-group headerPanelGroup">Other
            <button class="list-group-item" href="#" data-toggle="modal" data-backdrop="static"
                    data-target="#modalPlot" id="lengthStats">Length
            </button>
            <button class="list-group-item" href="#" data-toggle="modal" data-backdrop="static"
                    data-target="#modalPlot"
                    id="clusterStats">Clusters
            </button>
          </ul>
        </div>
      </li>
      <li data-toggle="collapse" data-target="#collapse6" class="collapse_groups">
        <a href="#">Projects</a>
        <div id="collapse6" class="panel-collapse collapse">
          <ul class="list-group">
            <button class="list-group-item" href="#"
                    data-toggle="modal" data-backdrop="static"
                    data-target="#projectModal">Export
            </button>
            <button class="list-group-item" href="#"
                    data-toggle="modal" data-backdrop="static"
                    data-target="#importProjectModal">Import
            </button>

          </ul>
        </div>
      </li>
      <li data-toggle="collapse" data-target="#collapse5"
          class="collapse_groups">
        <a href="#">Need help?</a>
        <div id="collapse5" class="panel-collapse collapse">
      <!--<li class="collapse_groups">-->
          <button class="list-group-item"
                  onclick='window.open("https://tiagofilipe12.gitbooks.io/patlas/content/")'>Documentation
          </button>
          <button class="list-group-item" href="#" data-toggle="modal" data-backdrop="static"
                  data-target="#videoModal">Video tutorial
          </button>
          <button class="list-group-item" href="#" data-toggle="modal" data-backdrop="static"
                  data-target="#formModal">FAQs
          </button>
        </div>
      </li>
      <li class="collapse_groups">
        <a href="#" data-toggle="modal" data-backdrop="static"
           data-target="#aboutModal">About</a>
      </li>
      </div>
    </ul>
  </div>
</div> <!--closes wrapper div-->

<!-- Starts navigation bar -->
<!--<nav class="navbar navbar-default navbar-fixed-top"> -->
<div class="navbar navbar-default navbar-fixed-top" id="navigation_bar">
  <div class="container-fluid">
    <!-- Brand and toggle get grouped for better mobile display -->
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed"
              data-toggle="collapse" data-target="#bs-example-navbar-collapse-1"
              aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
    </div>

    <!-- Collect the nav links, forms, and other content for toggling -->
    <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
      <ul class="nav navbar-nav">
        <li>
          <a href="#menu-toggle" id="menu-toggle" class="btn-lg">
            <span class="glyphicon glyphicon-menu-hamburger"></span>
          </a>
        </li>
      </ul>

      <form class="navbar-form navbar-left">
        <div class="btn-group">
          <button class="btn btn-info" id="reset-sliders"
                  type="button" data-toogle="tooptip"
                  title="Reset all applied filters">Reset nodes</button>

          <button class="btn btn-info" id="reset-links"
                  type="button" data-toogle="tooptip"
                  title="Reset all applied filters" autocomplete="off">Reset links</button>
          <!--</form>-->
        </div>

        <!--<form class="navbar-form navbar-left">-->
        <div class="btn-group" id="toolButtonGroup">
          <button class="btn btn-default" id="go_back"
                  type="button" data-toogle="tooptip"
                  title="Return to full tree view" style="display: none">
            <span class="glyphicon glyphicon-home"></span></button>
          <button class="btn btn-default" id="Re_run"
                  type="button" data-toggle="modal" data-backdrop="static"
                  data-target="#reRunModal"
                  title="Apply filters" style="display: none">
            <span class="glyphicon glyphicon-filter"></span></button>
          <!--for now this button is disabled since it does not have funcitonality-->
          <button class="btn btn-default" id="download_ds"
                  type="button" data-toogle="tooptip"
                  title="Download current selection" style="display: none">
            <span class="glyphicon glyphicon-save"></span></button>
          <button class="btn btn-default" id="tableShow"
                  type="button" data-toogle="tooptip"
                  title="Table with metadata" style="display:
                            none">
            <span class="glyphicon glyphicon-list-alt"></span></button>
          <button class="btn btn-default" id="heatmapButtonTab"
                  type="button" data-toogle="tooptip"
                  title="Heatmap for multiple import comparison" style="display:
                            none">
            <span class="glyphicon glyphicon-th"></span>
          </button>
          <button class="btn btn-default"
                  data-toggle="tooltip" type="button"
                  title="Quick stats"
                  id="plotButton" style="display: none">
            <span class="glyphicon glyphicon-stats"></span>
          </button>

          <!--<button class="btn btn-default" id="download_img"
                  type="button" data-toogle="tooptip"
                  title="Take a screenshot">
            <span class="glyphicon glyphicon-save"></span></button>-->
        </div>

      </form>
      <form class="navbar-form navbar-right">
        <input data-toggle="toggle" type="checkbox"
               data-onstyle="success" data-offstyle="default"
               data-on="Plasmid name"
               data-off="Accession no"
               title="Switch between plasmid and accession search"
               id="toggle-event">
        <div class="form-group" data-toggle="tooltip"
             title="e.g 'NZ_CP012658.1'">
          <input id="formValueId" type="text" class="form-control"
                 placeholder="Search an accession number"/>
        </div>
        <div class="btn-group">
          <button id="submitButton" type="submit" data-toggle="tooltip"
                  title="Centers at the provided accession corresponding node"
                  class="btn btn-default">Go</button>
          <button id="clearButton" data-toggle="tooltip"
                  title="Remove color for all selected species" type="button"
                  class="btn btn-info">Clear</button>
        </div>
      </form>
    </div><!-- /.navbar-collapse -->
  </div><!-- /.container-fluid -->
</div>


<!-- /#wrapper -->
<!-- Menu Toggle Script -->
<!--<script>-->
  <!--$("#menu-toggle").click(function(e) {-->
    <!--e.preventDefault()-->
    <!--$("#wrapper").toggleClass("toggled")-->
  <!--})-->
<!--</script>-->

{% include 'popup.html' %}

{% include 'colorLegend.html' %}

{% include 'fileInputModal.html' %}

<!--main div that contains vivagraph-->
<div id="couve-flor"></div>

{% include 'buttonsVivagraph.html' %}

<div class="graph-overlay"></div>
<span style="color: white; margin: 10px;">Use mouse to draw rectangle and select nodes</span>


<!-- Modal for Re_run-->
<div id="reRunModal" class="modal fade" role="dialog" tabindex="-1">
  <div class="modal-dialog">

    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal">&times;</button>
        <h4 class="modal-title">Filtering graph for the current selection</h4>
      </div>
      <div class="modal-body" id="modalBodyReRun">

        <p>Do you want to keep plasmids linked to selected nodes?</p>

        <div class="modal-footer">
          <button type="submit" class="btn btn-success"
                  data-dismiss="modal" id="reRunYes">Yes</button>
          <button type="submit" class="btn btn-danger"
                  data-dismiss="modal" id="reRunNo">No</button>
        </div>
      </div>

    </div>
  </div>
</div>

<div id="modalPlot" class="modal fade" role="dialog" tabindex="-1"
     data-backdrop="static">
  <div class="modal-dialog" style="width: 70%">
    <!-- Modal content for file-->
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal">&times;</button>
        <h4 class="modal-title">Quick statistics histograms</h4>
      </div>
      <div class="modal-body" id="modal-body-plot">
        <div class="alert alert-warning alert-dismissable fade in"
             id="alertPlot"
             style="display: none">
          <button type="button" class="close"
                  aria-hidden="true" data-hide="true"
                  onclick="this.parentNode.style.display = 'none'">
            &times;</button>
          <strong>Warning!</strong> All plasmids have same size.
          There is no sufficient data to plot an histogram.
        </div>
        <div class="alert alert-info alert-dismissable fade in"
             id="alertPlotEntries">
          <span id="spanEntries"></span>
          <button type="button" class="close"
                  aria-hidden="true" data-hide="true"
                  onclick="this.parentNode.style.display = 'none'">
            &times;</button>
        </div>
        <div>
          <button class="btn btn-info" id="sortGraph"
                  type="button" data-toogle="tooptip"
                  title="Sort graph">
            <span class="glyphicon glyphicon-sort-by-attributes-alt"></span>
          </button>
          <button class="btn btn-info" id="sortGraphAlp"
                  type="button" data-toogle="tooptip"
                  title="Sort graph">
            <span class="glyphicon glyphicon-sort-by-alphabet"></span>
          </button>

        </div>
        <div id="progressDiv">
          <div id="plotWait">Please wait...
            <img id="loadingImgPlots"
                 src="{{ url_for('static', filename='images/loading.gif') }}" alt="Loading..."/>

          </div>
        </div>
        <!--div to put the plot-->
        <div id="chartContainerSpecies"></div>
        <div id="chartContainerOrder"></div>
        <div id="chartContainerFamily"></div>
        <div id="chartContainerGenus"></div>
        <div id="chartContainerLength"></div>
        <div id="chartContainerResistance"></div>
        <div id="chartContainerCluster"></div>
        <div id="chartContainerPlasmidFamilies"></div>
        <div id="chartContainerVirulence"></div>
      </div>

      <div class="modal-footer">
        <button type="button" class="btn btn-default btn-circle"
                data-toggle="popover" data-placement="right"
                data-trigger="focus"
                data-original-title="Plot controls"
                data-content="<li>Ctrl + left mouse click - enables panning</li>
                <li>Left mouse click + dragging - enables zooming</li>
                <li>Click on bars will enable selections of their associated
                datasets through the 'Highlight on plasmid network button (bar
                plots only)</li>"
                data-html="true"
                aria-describedby="tooltip" style="position: absolute;
                        left:2%" id="questionPlots"
        >
          <span class="glyphicon glyphicon-question-sign"></span>
        </button>
        <button class="btn btn-default"  id="speciesPlot">Species
        </button>
        <button class="btn btn-default"  id="genusPlot">Genera
        </button>
        <button class="btn btn-default"  id="familyPlot">Families
        </button>
        <button class="btn btn-default"  id="orderPlot">Orders
        </button>
        <button class="btn btn-default" id="lengthPlot">Length
        </button>
        <button class="btn btn-default"  id="clusterPlot">Clusters
        </button>
        <button class="btn btn-default" id="resPlot">Resistances
        </button>
        <button class="btn btn-default" id="pfPlot">Plasmid Families
        </button>
        <button class="btn btn-default" id="virPlot">Virulence
        </button>
      </div>
    </div>

  </div>
</div>

<!-- Modal for resistances-->
<div id="resModal" class="modal fade" role="dialog" tabindex="-1">
  <div class="modal-dialog">

    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal">&times;</button>
        <h4 class="modal-title">Filter plasmids by
          resistance genes</h4>
      </div>
      <div class="modal-body" id="modalBodyABR">

        <!--resistance dropdowns-->
        {% include 'res_filters.html' %}

        <div class="row" id="modalBodyABR2">
          <div class='col-md-12'>
            <div class="panel-group" id="displayCurrentABR">
              <div class="panel panel-info" >
                <div class="panel-heading">
                  Selected genes</div>
                <div class="panel-body"
                     id="displayCurrentBoxABR">
                  <!--Populated by visualization_functions.js-->
                  <p id="p_Card">Card:</p>
                  <p id="p_Resfinder">Resfinder:</p>
                </div>
              </div>
            </div>
          </div>
        </div>

        <div style="text-align: center">
          <button class="btn btn-info" href="#" data-dismiss="modal"
                  data-toggle="modal" data-backdrop="static"
                  data-target="#taxaModal"
          >+ Taxa
          </button>
          <button class="btn btn-info" href="#" data-dismiss="modal"
                  data-toggle="modal" data-backdrop="static"
                  data-target="#plasmidFamiliesModal"
                  >+ Plasmid families
          </button>
          <button class="btn btn-info" href="#" data-dismiss="modal"
                  data-toggle="modal" data-backdrop="static"
                  data-target="#virModal"
                  >+ Virulence
          </button>
        </div>

      </div>
      <div class="modal-footer">
        <button type="submit" class="btn btn-default"
                data-dismiss="modal" id="resSubmit">Submit</button>
        <button type="submit" class="btn btn-danger"
                id="resClear">Clear selection</button>
      </div>
    </div>

  </div>
</div>

<!-- Modal for families-->
<div id="plasmidFamiliesModal" class="modal fade" role="dialog" tabindex="-1">
  <div class="modal-dialog">

    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal">&times;</button>
        <h4 class="modal-title">Filter plasmids by
          plasmid family genes</h4>
      </div>
      <div class="modal-body" id="modalBodyFAM">

        <!--plasmid finder dropdowns-->
        {% include 'pf_filters.html' %}

        <div class="row" id="modalBodyFAM2">
          <div class='col-md-12'>
            <div class="panel-group" id="displayCurrentFAM">
              <div class="panel panel-info" >
                <div class="panel-heading">
                  Selected genes</div>
                <div class="panel-body"
                     id="displayCurrentBoxFAM">
                  <!--Populated by visualization_functions.js-->
                  <p id="p_Plasmidfinder">Plasmidfinder:</p>
                </div>
              </div>
            </div>
          </div>
        </div>

        <div style="text-align: center">
          <button class="btn btn-info" href="#" data-dismiss="modal"
                  data-toggle="modal" data-backdrop="static"
                  data-target="#taxaModal">+ Taxa
          </button>
          <button class="btn btn-info" href="#" data-dismiss="modal"
                  data-toggle="modal" data-backdrop="static"
                  data-target="#resModal">+ Resistances
          </button>
          <button class="btn btn-info" href="#" data-dismiss="modal"
                  data-toggle="modal" data-backdrop="static"
                  data-target="#virModal">+ Virulence
          </button>
        </div>

      </div>
      <div class="modal-footer">
        <button type="submit" class="btn btn-default"
                data-dismiss="modal" id="pfSubmit">Submit</button>
        <button type="submit" class="btn btn-danger"
                id="pfClear">Clear selection</button>
      </div>
    </div>

  </div>
</div>

<!-- Modal for virulence factors-->
<div id="virModal" class="modal fade" role="dialog" tabindex="-1">
  <div class="modal-dialog">

    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal">&times;</button>
        <h4 class="modal-title">Filter plasmids by
          virulence factor genes</h4>
      </div>
      <div class="modal-body" id="modalBodyVir">

        <!--virulence dropdowns-->
        {% include 'vir_filters.html' %}

        <div class="row" id="modalBodyVir2">
          <div class='col-md-12'>
            <div class="panel-group" id="displayCurrentVir">
              <div class="panel panel-info" >
                <div class="panel-heading">
                  Selected genes</div>
                <div class="panel-body"
                     id="displayCurrentBoxVir">
                  <!--Populated by visualization_functions.js-->
                  <p id="p_Virulence">Virulence:</p>
                </div>
              </div>
            </div>
          </div>
        </div>

        <div style="text-align: center">
          <button class="btn btn-info" href="#" data-dismiss="modal"
                  data-toggle="modal" data-backdrop="static"
                  data-target="#taxaModal">+ Taxa
          </button>
          <button class="btn btn-info" href="#" data-dismiss="modal"
                  data-toggle="modal" data-backdrop="static"
                  data-target="#plasmidFamiliesModal">+ Plasmid families
          </button>
          <button class="btn btn-info" href="#" data-dismiss="modal"
                  data-toggle="modal" data-backdrop="static"
                  data-target="#resModal">+ Resistances
          </button>
        </div>

      </div>
      <div class="modal-footer">
        <button type="submit" class="btn btn-default"
                data-dismiss="modal" id="virSubmit">Submit</button>
        <button type="submit" class="btn btn-danger"
                id="virClear">Clear selection</button>
      </div>
    </div>

  </div>
</div>

{% include 'combinedSelections.html' %}

<!-- scripts that need to be loaded inside the body-->
<script language="javascript" type="text/javascript"
        src="{{ url_for('static', filename='node_modules/nouislider/distribute/nouislider.min.js') }}"></script>
<script language="javascript" type="text/javascript"
        src="{{ url_for('static', filename='js/menu-toggle.js') }}"></script>

</body>

</html>